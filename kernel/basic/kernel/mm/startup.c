#include <mm/mmu.h>

#ifdef A_CORE
/**startup with one level section descripter(32 bits)
2bits  0-2   : pagedir type, =2 for section type
1bits  3     : Bufferable =1
1bits  e     : Cachable = 1
2bits  10-11 : AP = 1
3bits  12-13 : TEX = 1
12bits 20-31 : base address of section (1M for one section)
*/
__attribute__((__aligned__(PAGE_DIR_SIZE)))
uint32_t _startup_page_dir[PAGE_DIR_NUM] = { 
	0xE | (1 << 10) | (1 << 12) | (0 << 20), 
	0xE | (1 << 10) | (1 << 12) | (1 << 20),
	0xE | (1 << 10) | (1 << 12) | (2 << 20), 
	0xE | (1 << 10) | (1 << 12) | (3 << 20),
	0xE | (1 << 10) | (1 << 12) | (4 << 20), 
	0xE | (1 << 10) | (1 << 12) | (5 << 20),
	0xE | (1 << 10) | (1 << 12) | (6 << 20), 
	0xE | (1 << 10) | (1 << 12) | (7 << 20),
	0xE | (1 << 10) | (1 << 12) | (8 << 20), 
	0xE | (1 << 10) | (1 << 12) | (9 << 20),
	0xE | (1 << 10) | (1 << 12) | (10 << 20), 
	0xE | (1 << 10) | (1 << 12) | (11 << 20),
	0xE | (1 << 10) | (1 << 12) | (12 << 20), 
	0xE | (1 << 10) | (1 << 12) | (13 << 20),
	0xE | (1 << 10) | (1 << 12) | (14 << 20), 
	0xE | (1 << 10) | (1 << 12) | (15 << 20),
	0xE | (1 << 10) | (1 << 12) | (16 << 20), 
	0xE | (1 << 10) | (1 << 12) | (17 << 20),
	0xE | (1 << 10) | (1 << 12) | (18 << 20), 
	0xE | (1 << 10) | (1 << 12) | (19 << 20),
	0xE | (1 << 10) | (1 << 12) | (20 << 20), 
	0xE | (1 << 10) | (1 << 12) | (21 << 20),
	0xE | (1 << 10) | (1 << 12) | (22 << 20), 
	0xE | (1 << 10) | (1 << 12) | (23 << 20),
	0xE | (1 << 10) | (1 << 12) | (24 << 20), 
	0xE | (1 << 10) | (1 << 12) | (25 << 20),
	0xE | (1 << 10) | (1 << 12) | (26 << 20), 
	0xE | (1 << 10) | (1 << 12) | (27 << 20),
	0xE | (1 << 10) | (1 << 12) | (28 << 20), 
	0xE | (1 << 10) | (1 << 12) | (29 << 20),
	0xE | (1 << 10) | (1 << 12) | (30 << 20), 
	0xE | (1 << 10) | (1 << 12) | (31 << 20),

	[0x3f200000 >> 20] = 
	0xE | (1 << 10) | (1 << 12) | (31 << 20),

	[KERNEL_BASE >> 20] = 
	0xE | (1 << 10) | (1 << 12) | (0 << 20), 
	0xE | (1 << 10) | (1 << 12) | (1 << 20),
	0xE | (1 << 10) | (1 << 12) | (2 << 20), 
	0xE | (1 << 10) | (1 << 12) | (3 << 20),
	0xE | (1 << 10) | (1 << 12) | (4 << 20),
	0xE | (1 << 10) | (1 << 12) | (5 << 20),
	0xE | (1 << 10) | (1 << 12) | (6 << 20),
	0xE | (1 << 10) | (1 << 12) | (7 << 20),
	0xE | (1 << 10) | (1 << 12) | (8 << 20), 
	0xE | (1 << 10) | (1 << 12) | (9 << 20),
	0xE | (1 << 10) | (1 << 12) | (10 << 20),
	0xE | (1 << 10) | (1 << 12) | (11 << 20),
	0xE | (1 << 10) | (1 << 12) | (12 << 20),
	0xE | (1 << 10) | (1 << 12) | (13 << 20),
	0xE | (1 << 10) | (1 << 12) | (14 << 20),
	0xE | (1 << 10) | (1 << 12) | (15 << 20),
	0xE | (1 << 10) | (1 << 12) | (16 << 20),
	0xE | (1 << 10) | (1 << 12) | (17 << 20),
	0xE | (1 << 10) | (1 << 12) | (18 << 20),
	0xE | (1 << 10) | (1 << 12) | (19 << 20),
	0xE | (1 << 10) | (1 << 12) | (20 << 20),
	0xE | (1 << 10) | (1 << 12) | (21 << 20),
	0xE | (1 << 10) | (1 << 12) | (22 << 20),
	0xE | (1 << 10) | (1 << 12) | (23 << 20),
	0xE | (1 << 10) | (1 << 12) | (24 << 20),
	0xE | (1 << 10) | (1 << 12) | (25 << 20),
	0xE | (1 << 10) | (1 << 12) | (26 << 20),
	0xE | (1 << 10) | (1 << 12) | (27 << 20),
	0xE | (1 << 10) | (1 << 12) | (28 << 20),
	0xE | (1 << 10) | (1 << 12) | (29 << 20),
	0xE | (1 << 10) | (1 << 12) | (30 << 20),
	0xE | (1 << 10) | (1 << 12) | (31 << 20),
};

#else

/**startup with one level section descripter(32 bits)
2bits  0-2   : pagedir type, 2 for section type
2bits  10-11 : AP, 2 for read only
12bits 20-31 : base address of section (1M for one section)
*/
__attribute__((__aligned__(PAGE_DIR_SIZE)))
uint32_t _startup_page_dir[PAGE_DIR_NUM] = { 
	2 | (2 << 10) | (0 << 20), 
	2 | (2 << 10) | (1 << 20),
	2 | (2 << 10) | (2 << 20), 
	2 | (2 << 10) | (3 << 20),
	2 | (2 << 10) | (4 << 20), 
	2 | (2 << 10) | (5 << 20),
	2 | (2 << 10) | (6 << 20), 
	2 | (2 << 10) | (7 << 20),
	2 | (2 << 10) | (8 << 20), 
	2 | (2 << 10) | (9 << 20),
	2 | (2 << 10) | (10 << 20), 
	2 | (2 << 10) | (11 << 20),
	2 | (2 << 10) | (12 << 20), 
	2 | (2 << 10) | (13 << 20),
	2 | (2 << 10) | (14 << 20), 
	2 | (2 << 10) | (15 << 20),
	2 | (2 << 10) | (16 << 20), 
	2 | (2 << 10) | (17 << 20),
	2 | (2 << 10) | (18 << 20), 
	2 | (2 << 10) | (19 << 20),
	2 | (2 << 10) | (20 << 20), 
	2 | (2 << 10) | (21 << 20),
	2 | (2 << 10) | (22 << 20), 
	2 | (2 << 10) | (23 << 20),
	2 | (2 << 10) | (24 << 20), 
	2 | (2 << 10) | (25 << 20),
	2 | (2 << 10) | (26 << 20), 
	2 | (2 << 10) | (27 << 20),
	2 | (2 << 10) | (28 << 20), 
	2 | (2 << 10) | (29 << 20),
	2 | (2 << 10) | (30 << 20), 
	2 | (2 << 10) | (31 << 20),

	[KERNEL_BASE >> 20] = 
	2 | (2 << 10) | (0 << 20), 
	2 | (2 << 10) | (1 << 20),
	2 | (2 << 10) | (2 << 20), 
	2 | (2 << 10) | (3 << 20),
	2 | (2 << 10) | (4 << 20),
	2 | (2 << 10) | (5 << 20),
	2 | (2 << 10) | (6 << 20),
	2 | (2 << 10) | (7 << 20),
	2 | (2 << 10) | (8 << 20), 
	2 | (2 << 10) | (9 << 20),
	2 | (2 << 10) | (10 << 20),
	2 | (2 << 10) | (11 << 20),
	2 | (2 << 10) | (12 << 20),
	2 | (2 << 10) | (13 << 20),
	2 | (2 << 10) | (14 << 20),
	2 | (2 << 10) | (15 << 20),
	2 | (2 << 10) | (16 << 20),
	2 | (2 << 10) | (17 << 20),
	2 | (2 << 10) | (18 << 20),
	2 | (2 << 10) | (19 << 20),
	2 | (2 << 10) | (20 << 20),
	2 | (2 << 10) | (21 << 20),
	2 | (2 << 10) | (22 << 20),
	2 | (2 << 10) | (23 << 20),
	2 | (2 << 10) | (24 << 20),
	2 | (2 << 10) | (25 << 20),
	2 | (2 << 10) | (26 << 20),
	2 | (2 << 10) | (27 << 20),
	2 | (2 << 10) | (28 << 20),
	2 | (2 << 10) | (29 << 20),
	2 | (2 << 10) | (30 << 20),
	2 | (2 << 10) | (31 << 20),
};

#endif
